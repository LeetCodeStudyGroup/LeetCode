class Solution {
public:
    bool isMatch(string s, string p) {
        if(s.size()==0 && p.size()==0)
            return true;
        int indexS = 0;
        int indexP = 0;
        
        if(p == ".*")
            return true;
            
        while(indexS < s.size() && indexP < p.size()) {
            if(p[indexP] == s[indexS] || p[indexP] == '.') {
                // p[indexP] == '.' always true
                if(p.size() > indexP+1 && p[indexP+1] == '*') {
                    char charStar = s[indexS];
                    indexP++;
                    while(indexS < s.size() && s[indexS] == charStar) indexS++;
                } else {
                    indexS++;
                }
            } else {
                if(p.size() > indexP+1 && p[indexP+1] == '*') {
                    char charStar = p[indexP];
                    indexP++;
                    while(indexS < s.size() && s[indexS] == charStar) indexS++;
                } else {
                    return false;
                }
            }
            
            indexP++;
        }
        
        if(indexS >= s.size() && indexP >= p.size())
            return true;
        else
            return false;
    }
};
